;;----------------------------------------------------------------------------------------------------------------------
;; Next feature demos
;;----------------------------------------------------------------------------------------------------------------------

        DEVICE  ZXSPECTRUMNEXT
        CSPECTMAP "demo.nex.map"

;;----------------------------------------------------------------------------------------------------------------------
;; Convenience macros
;;----------------------------------------------------------------------------------------------------------------------

        MACRO ldhl

                ld      a,(hl)
                inc     hl
                ld      h,(hl)
                ld      l,a

        ENDM

;;----------------------------------------------------------------------------------------------------------------------
;;
;; Start
;;
;;----------------------------------------------------------------------------------------------------------------------

                org     $8000

Start:
                ld      hl,DemoTable
                ld      a,(DemoChoice)
                sla     a
                add     hl,a
                ldhl
                ei
                jp      (hl)

                jr      $

DemoChoice:     db      0

DemoTable:      dw      L2Demo

;;----------------------------------------------------------------------------------------------------------------------
;; Demos source
;;----------------------------------------------------------------------------------------------------------------------

                include "src/l2_demo.s"

;;----------------------------------------------------------------------------------------------------------------------
;; Nex saving
;;----------------------------------------------------------------------------------------------------------------------

        SAVENEX OPEN "demo.nex", Start, $8000
        SAVENEX CORE 2, 0, 0
        SAVENEX CFG 0, 0, 0             ; Set to 0, 0, 1 for 2MB

        SAVENEX AUTO

;;----------------------------------------------------------------------------------------------------------------------
;;----------------------------------------------------------------------------------------------------------------------


